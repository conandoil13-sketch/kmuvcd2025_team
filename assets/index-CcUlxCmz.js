(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const h of i.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function o(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(l){if(l.ep)return;l.ep=!0;const i=o(l);fetch(l.href,i)}})();const v={w:2560,h:1440},A=40,p=160,L="A–Z, 0–9, 공백, . , ! ? _ - @ # ( ) [ ] / & * % + : ;",m={A:"glyphs/a.html",B:"glyphs/b.html",C:"glyphs/c.html",D:"glyphs/d.html",E:"glyphs/e.html",F:"glyphs/f.html",G:"glyphs/g.html",H:"glyphs/h.html",I:"glyphs/i.html",J:"glyphs/j.html",K:"glyphs/k.html",L:"glyphs/l.html",M:"glyphs/m.html",N:"glyphs/n.html",O:"glyphs/o.html",P:"glyphs/p.html",Q:"glyphs/q.html",R:"glyphs/r.html",S:"glyphs/s.html",T:"glyphs/t.html",U:"glyphs/u.html",V:"glyphs/v.html",W:"glyphs/w.html",X:"glyphs/x.html",Y:"glyphs/y.html",Z:"glyphs/z.html",0:"glyphs/0.html",1:"glyphs/1.html",2:"glyphs/2.html",3:"glyphs/3.html",4:"glyphs/4.html",5:"glyphs/5.html",6:"glyphs/6.html",7:"glyphs/7.html",8:"glyphs/8.html",9:"glyphs/9.html","!":"glyphs/exclaim.html","?":"glyphs/question.html",".":"glyphs/period.html",",":"glyphs/comma.html","-":"glyphs/hyphen.html",_:"glyphs/underscore.html","@":"glyphs/at.html","#":"glyphs/hash.html"};Object.assign(m,{"&":"glyphs/ampersand.html","*":"glyphs/asterisk.html","/":"glyphs/slash.html","(":"glyphs/paren.html",")":"glyphs/paren.html","[":"glyphs/bracket-square.html","]":"glyphs/bracket-square.html"});const x=/^[A-Za-z0-9\s.,!?_\-@#()/\[\]&*]$/,S=[],a=t=>document.querySelector(t),n=a("#textInput"),P=a("#limitInput"),_=a("#trackingInput"),D=a("#leadingInput"),f=a("#output"),O=a("#charCount"),M=a("#charLimit"),z=a("#linkedCount"),k=a("#unsupportedCount"),C=a("#supportedList"),F=a("#clearBtn"),B=a("#printBtn"),u=a("#fontSizeInput"),b=a("#fontSizeLabel");let w=null;function d(t){let e=document.getElementById("typoToast");e||(e=document.createElement("div"),e.id="typoToast",e.style.cssText=`
      position:fixed; left:50%; bottom:28px; transform:translateX(-50%);
      padding:10px 14px; border-radius:10px;
      background:rgba(20,20,20,.92); color:#f5f5f5; font:13px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Arial;
      border:1px solid #2a2a2a; box-shadow:0 6px 24px rgba(0,0,0,.35);
      opacity:0; pointer-events:none; transition:opacity .18s ease;
      z-index:9999; white-space:pre-wrap; text-align:center; max-width:min(90vw,680px);
    `,document.body.appendChild(e)),e.textContent=t,requestAnimationFrame(()=>{e.style.opacity="1"}),clearTimeout(w),w=setTimeout(()=>{e.style.opacity="0"},1400)}let c=A;function N(){if(n.maxLength=c,M.textContent=c,R(),n.addEventListener("input",U),P.addEventListener("change",H),_.addEventListener("input",q),D.addEventListener("input",G),F.addEventListener("click",()=>{n.value="",g("")}),B.addEventListener("click",X),n.addEventListener("beforeinput",t=>{if(typeof t.data=="string"&&t.data.length===1){if((n.selectionStart!=null&&n.selectionEnd!=null?n.value.length-(n.selectionEnd-n.selectionStart)+1:n.value.length+1)>c){t.preventDefault(),d(`최대 ${c}자까지 입력할 수 있어요.`);return}x.test(t.data)||(t.preventDefault(),d(`허용된 문자만 입력할 수 있어요.
`+L))}}),n.addEventListener("paste",t=>{t.preventDefault();const e=t.clipboardData||window.clipboardData,o=e&&e.getData("text")||"";let s="";for(const E of o)x.test(E)&&(s+=E);const l=n.selectionStart??n.value.length,i=n.selectionEnd??n.value.length,h=n.value.length-(i-l),r=Math.max(0,c-h),y=s.slice(0,r);y.length&&(n.setRangeText(y,l,i,"end"),n.dispatchEvent(new Event("input",{bubbles:!0}))),s.length!==o.length?d(`허용된 문자만 붙여넣을 수 있어요.
`+L):y.length||d(`최대 ${c}자까지 입력할 수 있어요.`)}),u){const t=parseInt(localStorage.getItem("fontSizePx")||String(p),10);u.value=isFinite(t)?t:p,T(),u.addEventListener("input",T)}else document.documentElement.style.setProperty("--fontSizePx",p);I(),window.addEventListener("resize",I),g(n.value)}document.addEventListener("DOMContentLoaded",N);function R(){C.innerHTML="",Object.keys(m).sort().forEach(e=>{const o=document.createElement("li");o.textContent=e+" → "+m[e],C.appendChild(o)})}function U(t){const e=t.target.value;g(e)}function g(t){O.textContent=t.length,f.innerHTML="";let e=0,o=0;for(const s of t){const l=s.toUpperCase(),i=x.test(s),h=m[l];if(h){const r=document.createElement("a");r.href=h,r.target="_self",r.rel="noopener",r.className="char",r.textContent=s,r.setAttribute("aria-label",`${s} 글리프 설명 페이지로 이동`),f.appendChild(r),e++}else{const r=document.createElement("span");r.className="char"+(i||s===" "?"":" unsupported"),r.textContent=s===" "?" ":s,f.appendChild(r),!i&&s!==" "&&o++}}z.textContent=e,k.textContent=o}function H(){const t=parseInt(P.value,10);c=isFinite(t)?Math.max(1,Math.min(200,t)):A,n.maxLength=c,M.textContent=c,n.value.length>c&&(n.value=n.value.slice(0,c),g(n.value))}function q(){document.documentElement.style.setProperty("--tracking",_.value)}function G(){const t=Math.max(50,Math.min(300,parseInt(D.value||"100",10)));document.documentElement.style.setProperty("--leading",(t/100).toString())}function T(){const t=u?parseInt(u.value||String(p),10):p,e=Math.max(24,Math.min(300,isFinite(t)?t:p));document.documentElement.style.setProperty("--fontSizePx",e),b&&(b.textContent=e+"px");try{localStorage.setItem("fontSizePx",String(e))}catch{}}function I(){const t=window.innerWidth,e=window.innerHeight,o=t/v.w,s=(e-64)/v.h,l=Math.min(o,s);document.documentElement.style.setProperty("--scale",l.toString())}async function X(){try{if(!("usb"in navigator)){alert("이 브라우저는 WebUSB를 지원하지 않습니다. 데스크톱 Chrome + HTTPS를 사용해주세요.");return}const t=await navigator.usb.requestDevice({filters:S.length?S:void 0});await t.open(),t.configuration===null&&await t.selectConfiguration(1),await t.claimInterface(0);const e=new TextEncoder,o=27,l=[o,64,o,77,0,o,33,0,...e.encode(`Typo Archive — Live Glyph Output
`),...e.encode(`------------------------------
`),...e.encode(n.value+`

`),29,86,0];await t.transferOut(1,new Uint8Array(l)),alert("전송 완료! (모델에 따라 커맨드 수정 필요)")}catch(t){console.error(t),alert("프린터 전송 중 문제 발생: "+t.message)}}
